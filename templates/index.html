{% extends "layout.html" %}

{% block content %}
  <main class="hero-section">
    <div class="container">
      
      <div class="section-content">
        <h2>Find Cheapest Movie Tickets.</h2>
        <a href="#" class="btn-primary">Sign up</a>
        <a href="{{ url_for('about') }}" class="btn-secondary">Learn more</a>
      </div>
      <div class="section-device">
        <img src="static/img/device.png">
      </div>
        <div class="clearfix"></div>
    </div>
        <div id="googleMap" style="width:30%;height:300px;"></div>
<script>
var lat;
var long;
var my_map;
var position;
function myMap(){
    var mapProp= {
    center:new google.maps.LatLng(50,50),
    zoom:12,
    };
    my_map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
    if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(set_map);
    }
    //console.log(lat, long);
    var request = {
        location: new google.maps.LatLng(40.440624,-79.995888),
        radius: 1000,
        type: "movie_theater"
    };
    service = new google.maps.places.PlacesService(my_map);
    service.textSearch(request, callback);
}

function set_map(pos){
    var lat = pos.coords.latitude;
    var long = pos.coords.longitude;
    my_map.setCenter(new google.maps.LatLng(lat, long));
}

function callback(results, status){
    console.log(status);
    if (status == google.maps.places.PlacesServiceStatus.OK) {
        for (var i = 0; i < results.length; i++) {
            var place = results[i];
            createMarker(place);
            console.log(place);
        }
    }
}
function createMarker(place){
    var marker = new google.maps.Marker({
        map: my_map,
        position: place.geometry.location
    });
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAU5KAyTuvKuS95KySyAzeCPsBY_pj2lGw&libraries=places&callback=myMap"></script>

  </main>
{% endblock %}