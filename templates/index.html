{% extends "layout.html" %}

{% block content %}
<main class="hero-section">
    <div class="container">
        <div id="login_information" display="none">LOGIN INFORMATION</div>
        <button id='logout_button' onclick='logout()'>Log out</button>
        <div class="section-content">
            <h2>Find Cheapest Movie Tickets.</h2>
            <div id="message_display"></div>
            <div>Username</div>
            <input type="text" id="username_entry">
            <br>
            <div>Password</div>
            <input type="text" id="password_entry">
            <br>
            <br>
            <button onclick="add_user();" class='btn-primary'>Sign up</button>
            <button onclick="login();" class="btn-secondary">Login</button>
            <br>
            <br>
            <a href="/templates/slideshowPage.html" class="btn-primary">Slide Show</a>
        </div>
        <script src='/static/js/login_display2.js'></script>
        <div class="section-device">
            <div id="googleMap" style="width:600px;height:400px;"></div>
        </div>


        <div class="clearfix"></div>
    </div>

    <script>
        var lat;
        var long;
        var my_map;
        var position;

        function myMap() {
            var map_cent = new google.maps.LatLng(40.440624, -79.995888);

            my_map = new google.maps.Map(document.getElementById("googleMap"), {
                center: map_cent,
                zoom: 12
            });
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    var pos = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };
                    my_map.setZoom(16);
                    my_map.setCenter(pos);
                });
            }
            var request = {
                location: map_cent,
                radius: "1500",
                type: "movie_theater"
            };
            service = new google.maps.places.PlacesService(my_map);
            service.textSearch(request, callback);
        }


        function callback(results, status) {
            console.log(status);
            if (status == google.maps.places.PlacesServiceStatus.OK) {
                for (var i = 0; i < results.length; i++) {
                    var place = results[i];
                    createMarker(place);
                    console.log(place);
                }
            }
        }

        function createMarker(place) {
            var marker = new google.maps.Marker({
                map: my_map,
                position: place.geometry.location
            });
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAU5KAyTuvKuS95KySyAzeCPsBY_pj2lGw&libraries=places&callback=myMap"></script>

</main>
{% endblock %}